Letâ€™s go deep into the OpenShift SDN Network Types and Modes, specifically the three modes:
ğŸ‘‰ Subnet
ğŸ‘‰ Multitenant
ğŸ‘‰ NetworkPolicy

ğŸ§  Background: OpenShift SDN
OpenShiftSDN is the legacy Software Defined Networking plugin used before the adoption of OVN-Kubernetes.
It builds a virtual overlay network (via VXLAN) that connects all pods across nodes, providing pod-level IPs and network isolation between projects.

ğŸ“¦ Core components:
Open vSwitch (OVS): Data plane that forwards packets.
openshift-sdn (or ovs-subnet/ovs-multitenant) pods: Control plane agents running on each node.
VXLAN tunnels: Provide pod-to-pod connectivity across nodes.
The behavior of the SDN â€” especially isolation between namespaces â€” is defined by its mode.

âš™ï¸ 1ï¸âƒ£ Subnet Mode
ğŸ”¹ Description
Simplest mode â€” all pods in the cluster can talk to each other freely, with no isolation between namespaces.
Used mainly in development or simple environments where you donâ€™t need tenant separation.

ğŸ”¹ How It Works
Every node gets a unique pod subnet (e.g., /23).
The SDN just routes packets between these subnets using VXLAN tunnels.
There are no network policies or project boundaries enforced.

ğŸ”¹ Communication Rules
âœ… Pod â†” Pod (any namespace): Allowed
âœ… Pod â†” Service: Allowed
âŒ No isolation or restrictions

ğŸ”¹ Example
| Namespace | Pod CIDR      | Reachability        |
| --------- | ------------- | ------------------- |
| projectA  | 10.128.0.0/23 | â†”                   |
| projectB  | 10.128.2.0/23 | â†” (Fully reachable) |

ğŸ”¹ Use Case
Lab setups
Clusters where all applications trust each other
Troubleshooting networks or debugging workloads

ğŸ§© 2ï¸âƒ£ Multitenant Mode
ğŸ”¹ Description
Introduces network isolation between projects/namespaces.
Each project (OpenShift namespace) becomes its own virtual network (like a tenant).
Pods in the same namespace can talk to each other freely, but pods in different namespaces are blocked by default.

ğŸ”¹ How It Works
The SDN assigns a unique VNID (Virtual Network ID) per project.
OVS flow rules use these VNIDs to enforce traffic separation.
VXLAN tunnels carry both pod IP and VNID tag across nodes.

ğŸ”¹ Communication Rules
âœ… Pod â†” Pod (same project): Allowed
âŒ Pod â†” Pod (different project): Blocked (unless allowed manually)
âœ… Pod â†” Service (same project): Allowed

ğŸ”¹ Example
| Namespace | VNID | Communication                  |
| --------- | ---- | ------------------------------ |
| projectA  | 100  | Can talk to projectA pods only |
| projectB  | 200  | Can talk to projectB pods only |

By default, cross-project traffic is denied.

ğŸ”¹ Admin Override
Cluster admins can allow specific projects to communicate using:
oc adm pod-network join-projects --to=projectA projectB
Or isolate them again:
oc adm pod-network isolate-projects projectB

ğŸ”¹ Use Case
Multi-tenant environments (e.g., shared OpenShift clusters).
When you want strict namespace-level isolation without configuring complex NetworkPolicies.
Secure environments (finance, defense, multi-team clusters).

ğŸ§± 3ï¸âƒ£ NetworkPolicy Mode
ğŸ”¹ Description
The most flexible and modern mode.
Instead of static per-project isolation, it uses Kubernetes NetworkPolicy API for fine-grained, dynamic traffic control.

ğŸ”¹ How It Works
Initially, all pods can communicate (like subnet mode).
You define NetworkPolicy YAMLs to control traffic at pod-level granularity â€” by namespace, label, or port.

ğŸ”¹ Example NetworkPolicy
Deny all traffic, then allow only from pods with label app=frontend:

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-frontend
  namespace: backend
spec:
  podSelector: {}   # applies to all backend pods
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: frontend

ğŸ”¹ Communication Rules
âœ… Pod â†” Pod: Controlled via NetworkPolicies
âœ… Pod â†” Service: Allowed unless restricted by policy
âœ… Pod â†” External: Configurable by egress rules

ğŸ”¹ Use Case
Security-focused clusters.
Compliance or microsegmentation requirements.
Developers who want to control traffic per app or label, not just per namespace.
ğŸ§­ Summary Table
| Mode              | Isolation                 | Configurable                 | Default Policy             | Use Case                               |
| ----------------- | ------------------------- | ---------------------------- | -------------------------- | -------------------------------------- |
| **Subnet**        | None                      | âŒ                            | Allow all                  | Simple clusters, Dev/Test              |
| **Multitenant**   | Namespace-level (Project) | âœ… (per-project join/isolate) | Deny cross-namespace       | Multi-tenant setups                    |
| **NetworkPolicy** | Pod-level                 | âœ… (via YAML policies)        | Allow all until restricted | Enterprise-grade, fine-grained control |

ğŸ” Check Current SDN Mode
oc get network.operator cluster -o jsonpath='{.spec.defaultNetwork.type}{"\n"}'
If it shows:
OpenShiftSDN â†’ Legacy plugin
OVNKubernetes â†’ New default plugin
Then, for OpenShiftSDN:
oc get clusternetwork default -o yaml | grep pluginName
Output Example:
pluginName: redhat/openshift-ovs-multitenant
Or:
redhat/openshift-ovs-subnet
redhat/openshift-ovs-networkpolicy

ğŸ§© Migration Path
As of OpenShift 4.12+:
OpenShiftSDN is being replaced by OVN-Kubernetes, which only supports NetworkPolicy-style isolation (no more multitenant/subnet modes).
This gives consistent behavior across hybrid and cloud deployments.

ğŸ“Š Visual Summary
[ Subnet Mode ]
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ProjectA â”‚ <--> â”‚ ProjectB â”‚   (All connected)
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ Multitenant Mode ]
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ProjectA â”‚ X    â”‚ ProjectB â”‚   (Isolated by VNID)
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ NetworkPolicy Mode ]
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Frontend â”‚ ---> â”‚ Backend  â”‚   (Allowed via Policy)
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ’¡ Key Takeaways
| Feature               | Subnet        | Multitenant          | NetworkPolicy                  |
| --------------------- | ------------- | -------------------- | ------------------------------ |
| **Isolation Level**   | None          | Namespace-based      | Pod/Label-based                |
| **Default Behavior**  | Allow all     | Deny cross-namespace | Allow all (until restricted)   |
| **Control Mechanism** | None          | VNID isolation       | Kubernetes NetworkPolicy       |
| **Admin Control**     | None          | oc adm pod-network   | YAML manifest                  |
| **Best for**          | Simple setups | Secure multi-tenant  | Fine-grained microsegmentation |

